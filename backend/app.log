2025-05-26 19:13:14,835 - services.scraper - WARNING - Detected captcha/bot protection on attempt 2
2025-05-26 19:13:14,836 - services.scraper - INFO - Waiting 1.27 seconds before attempt 3/5
2025-05-26 19:13:16,104 - services.scraper - INFO - Sending request to Amazon (attempt 3/5) with timeout of 25 seconds
2025-05-26 19:13:19,698 - services.scraper - WARNING - Detected captcha/bot protection on attempt 3
2025-05-26 19:13:19,699 - services.scraper - INFO - Waiting 2.95 seconds before attempt 4/5
2025-05-26 19:13:22,655 - services.scraper - INFO - Sending request to Amazon (attempt 4/5) with timeout of 30 seconds
2025-05-26 19:13:23,200 - werkzeug - INFO - 127.0.0.1 - - [26/May/2025 19:13:23] "GET /api/health HTTP/1.1" 200 -
2025-05-26 19:13:26,274 - services.scraper - WARNING - Detected captcha/bot protection on attempt 4
2025-05-26 19:13:26,275 - services.scraper - INFO - Waiting 3.83 seconds before attempt 5/5
2025-05-26 19:13:30,111 - services.scraper - INFO - Sending request to Amazon (attempt 5/5) with timeout of 35 seconds
2025-05-26 19:13:34,157 - services.scraper - WARNING - Detected captcha/bot protection on attempt 5
2025-05-26 19:13:34,158 - services.scraper - WARNING - All standard scraping attempts failed, trying aggressive fallback methods
2025-05-26 19:13:34,158 - services.scraper - INFO - Trying mobile URL: https://www.amazon.in/gp/aw/d/B0D8QCJP5J
2025-05-26 19:13:39,549 - services.scraper - INFO - Successfully extracted product name from mobile site: beAAtho® Verona Mesh High Back Ergonomic Home Office Chair | 3-Years Limited Warranty by beAAtho, Tilting & Height Adjustable Mechanism, Heavy Duty Metal Base | Ideal for Office Work & Study (Grey)
2025-05-26 19:13:39,654 - services.scraper - INFO - Successfully scraped Amazon product: beAAtho® Verona Mesh High Back Ergonomic Home Office Chair | 3-Years Limited Warranty by beAAtho, Tilting & Height Adjustable Mechanism, Heavy Duty Metal Base | Ideal for Office Work & Study (Grey)
2025-05-26 19:13:39,680 - services.database - ERROR - Error inserting price record: (sqlite3.OperationalError) table price_records has no column named platform
[SQL: INSERT INTO price_records (product_id, price, platform, timestamp) VALUES (?, ?, ?, ?)]
[parameters: (6, 70.0, 'Amazon', '2025-05-26 13:43:39.679140')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-05-26 19:13:39,681 - routes.products - ERROR - Error adding product: (sqlite3.OperationalError) table price_records has no column named platform
[SQL: INSERT INTO price_records (product_id, price, platform, timestamp) VALUES (?, ?, ?, ?)]
[parameters: (6, 70.0, 'Amazon', '2025-05-26 13:43:39.679140')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-05-26 19:13:39,683 - werkzeug - INFO - 127.0.0.1 - - [26/May/2025 19:13:39] "[35m[1mPOST /api/products HTTP/1.1[0m" 500 -
2025-05-26 19:13:47,299 - werkzeug - INFO - 127.0.0.1 - - [26/May/2025 19:13:47] "GET /api/products HTTP/1.1" 200 -
2025-05-26 19:13:47,556 - werkzeug - INFO - 127.0.0.1 - - [26/May/2025 19:13:47] "GET /api/products HTTP/1.1" 200 -
2025-05-26 19:13:53,059 - werkzeug - INFO - 127.0.0.1 - - [26/May/2025 19:13:53] "GET /api/health HTTP/1.1" 200 -
2025-05-26 19:14:10,271 - werkzeug - INFO - 127.0.0.1 - - [26/May/2025 19:14:10] "OPTIONS /api/products HTTP/1.1" 200 -
2025-05-26 19:14:10,536 - werkzeug - INFO - 127.0.0.1 - - [26/May/2025 19:14:10] "POST /api/products HTTP/1.1" 200 -
2025-05-26 19:14:10,600 - werkzeug - INFO - 127.0.0.1 - - [26/May/2025 19:14:10] "GET /api/products HTTP/1.1" 200 -
2025-05-26 19:14:12,330 - services.database - ERROR - Error getting price history for product 6: (sqlite3.OperationalError) no such column: price_records.platform
[SQL: SELECT price_records.id AS price_records_id, price_records.product_id AS price_records_product_id, price_records.price AS price_records_price, price_records.platform AS price_records_platform, price_records.timestamp AS price_records_timestamp 
FROM price_records 
WHERE price_records.product_id = ? ORDER BY price_records.timestamp ASC]
[parameters: (6,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-05-26 19:14:12,333 - routes.products - ERROR - Error fetching product 6 with grouped history: (sqlite3.OperationalError) no such column: price_records.platform
[SQL: SELECT price_records.id AS price_records_id, price_records.product_id AS price_records_product_id, price_records.price AS price_records_price, price_records.platform AS price_records_platform, price_records.timestamp AS price_records_timestamp 
FROM price_records 
WHERE price_records.product_id = ? ORDER BY price_records.timestamp ASC]
[parameters: (6,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-05-26 19:14:12,336 - werkzeug - INFO - 127.0.0.1 - - [26/May/2025 19:14:12] "[35m[1mGET /api/products/6 HTTP/1.1[0m" 500 -
2025-05-26 19:14:12,656 - services.database - ERROR - Error getting price history for product 6: (sqlite3.OperationalError) no such column: price_records.platform
[SQL: SELECT price_records.id AS price_records_id, price_records.product_id AS price_records_product_id, price_records.price AS price_records_price, price_records.platform AS price_records_platform, price_records.timestamp AS price_records_timestamp 
FROM price_records 
WHERE price_records.product_id = ? ORDER BY price_records.timestamp ASC]
[parameters: (6,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-05-26 19:14:12,658 - routes.products - ERROR - Error fetching product 6 with grouped history: (sqlite3.OperationalError) no such column: price_records.platform
[SQL: SELECT price_records.id AS price_records_id, price_records.product_id AS price_records_product_id, price_records.price AS price_records_price, price_records.platform AS price_records_platform, price_records.timestamp AS price_records_timestamp 
FROM price_records 
WHERE price_records.product_id = ? ORDER BY price_records.timestamp ASC]
[parameters: (6,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-05-26 19:14:12,660 - werkzeug - INFO - 127.0.0.1 - - [26/May/2025 19:14:12] "[35m[1mGET /api/products/6 HTTP/1.1[0m" 500 -
2025-05-26 19:14:22,866 - werkzeug - INFO - 127.0.0.1 - - [26/May/2025 19:14:22] "GET /api/products HTTP/1.1" 200 -
2025-05-26 19:14:23,113 - werkzeug - INFO - 127.0.0.1 - - [26/May/2025 19:14:23] "GET /api/health HTTP/1.1" 200 -
2025-05-26 19:14:23,176 - werkzeug - INFO - 127.0.0.1 - - [26/May/2025 19:14:23] "GET /api/products HTTP/1.1" 200 -
2025-05-26 19:14:23,190 - werkzeug - INFO - 127.0.0.1 - - [26/May/2025 19:14:23] "GET /api/products HTTP/1.1" 200 -
2025-05-26 19:14:23,504 - werkzeug - INFO - 127.0.0.1 - - [26/May/2025 19:14:23] "GET /api/products HTTP/1.1" 200 -
2025-05-26 19:14:53,359 - werkzeug - INFO - 127.0.0.1 - - [26/May/2025 19:14:53] "GET /api/health HTTP/1.1" 200 -
2025-05-26 19:15:22,863 - werkzeug - INFO - 127.0.0.1 - - [26/May/2025 19:15:22] "GET /api/health HTTP/1.1" 200 -
2025-05-26 19:15:53,353 - werkzeug - INFO - 127.0.0.1 - - [26/May/2025 19:15:53] "GET /api/health HTTP/1.1" 200 -
2025-05-26 19:16:23,050 - werkzeug - INFO - 127.0.0.1 - - [26/May/2025 19:16:23] "GET /api/health HTTP/1.1" 200 -
2025-05-26 19:17:15,363 - werkzeug - INFO - 127.0.0.1 - - [26/May/2025 19:17:15] "GET /api/health HTTP/1.1" 200 -
2025-05-26 19:18:15,056 - werkzeug - INFO - 127.0.0.1 - - [26/May/2025 19:18:15] "GET /api/health HTTP/1.1" 200 -
2025-05-26 19:19:15,368 - werkzeug - INFO - 127.0.0.1 - - [26/May/2025 19:19:15] "GET /api/health HTTP/1.1" 200 -
2025-05-26 19:20:15,050 - werkzeug - INFO - 127.0.0.1 - - [26/May/2025 19:20:15] "GET /api/health HTTP/1.1" 200 -
2025-05-26 19:21:15,357 - werkzeug - INFO - 127.0.0.1 - - [26/May/2025 19:21:15] "GET /api/health HTTP/1.1" 200 -
2025-05-26 19:22:15,371 - werkzeug - INFO - 127.0.0.1 - - [26/May/2025 19:22:15] "GET /api/health HTTP/1.1" 200 -
2025-05-26 19:23:15,053 - werkzeug - INFO - 127.0.0.1 - - [26/May/2025 19:23:15] "GET /api/health HTTP/1.1" 200 -
2025-05-26 19:24:15,379 - werkzeug - INFO - 127.0.0.1 - - [26/May/2025 19:24:15] "GET /api/health HTTP/1.1" 200 -
2025-05-26 19:25:15,355 - werkzeug - INFO - 127.0.0.1 - - [26/May/2025 19:25:15] "GET /api/health HTTP/1.1" 200 -
2025-05-26 19:26:15,059 - werkzeug - INFO - 127.0.0.1 - - [26/May/2025 19:26:15] "GET /api/health HTTP/1.1" 200 -
2025-05-26 21:40:51,256 - werkzeug - INFO - 127.0.0.1 - - [26/May/2025 21:40:51] "GET /api/health HTTP/1.1" 200 -
2025-05-26 21:41:15,355 - werkzeug - INFO - 127.0.0.1 - - [26/May/2025 21:41:15] "GET /api/health HTTP/1.1" 200 -
2025-05-26 21:42:15,058 - werkzeug - INFO - 127.0.0.1 - - [26/May/2025 21:42:15] "GET /api/health HTTP/1.1" 200 -
2025-05-26 21:43:15,353 - werkzeug - INFO - 127.0.0.1 - - [26/May/2025 21:43:15] "GET /api/health HTTP/1.1" 200 -
2025-05-27 06:30:24,491 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 06:30:24] "GET /api/health HTTP/1.1" 200 -
2025-05-27 06:31:15,363 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 06:31:15] "GET /api/health HTTP/1.1" 200 -
2025-05-27 06:32:15,051 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 06:32:15] "GET /api/health HTTP/1.1" 200 -
2025-05-27 06:33:15,355 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 06:33:15] "GET /api/health HTTP/1.1" 200 -
2025-05-27 06:40:10,673 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 06:40:10] "GET /api/health HTTP/1.1" 200 -
2025-05-27 07:39:58,856 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 07:39:58] "GET /api/health HTTP/1.1" 200 -
2025-05-27 07:41:15,367 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 07:41:15] "GET /api/health HTTP/1.1" 200 -
2025-05-27 07:42:15,071 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 07:42:15] "GET /api/health HTTP/1.1" 200 -
2025-05-27 13:37:57,264 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 13:37:57] "GET /api/health HTTP/1.1" 200 -
2025-05-27 13:39:15,377 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 13:39:15] "GET /api/health HTTP/1.1" 200 -
2025-05-27 13:40:15,061 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 13:40:15] "GET /api/health HTTP/1.1" 200 -
2025-05-27 13:41:15,374 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 13:41:15] "GET /api/health HTTP/1.1" 200 -
2025-05-27 13:41:33,001 - apscheduler.executors.default - WARNING - Run time of job "update_all_prices (trigger: interval[0:30:00], next run at: 2025-05-26 19:40:55 IST)" was missed by 0:00:37.500773
2025-05-27 13:41:36,366 - apscheduler.executors.default - WARNING - Run time of job "update_all_prices (trigger: interval[0:30:00], next run at: 2025-05-26 19:40:58 IST)" was missed by 0:00:37.488066
2025-05-27 13:42:15,051 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 13:42:15] "GET /api/health HTTP/1.1" 200 -
2025-05-27 13:43:15,367 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 13:43:15] "GET /api/health HTTP/1.1" 200 -
2025-05-27 13:44:15,058 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 13:44:15] "GET /api/health HTTP/1.1" 200 -
2025-05-27 13:45:15,364 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 13:45:15] "GET /api/health HTTP/1.1" 200 -
2025-05-27 14:06:48,775 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 14:06:48] "GET /api/health HTTP/1.1" 200 -
2025-05-27 14:07:15,060 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 14:07:15] "GET /api/health HTTP/1.1" 200 -
2025-05-27 14:08:15,351 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 14:08:15] "GET /api/health HTTP/1.1" 200 -
2025-05-27 14:09:15,056 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 14:09:15] "GET /api/health HTTP/1.1" 200 -
2025-05-27 14:10:15,363 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 14:10:15] "GET /api/health HTTP/1.1" 200 -
2025-05-27 14:11:15,352 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 14:11:15] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:11:23,139 - __main__ - INFO - CORS configured for all origins (development mode)
2025-05-27 15:11:23,185 - models.db - INFO - Database tables created or verified
2025-05-27 15:11:23,188 - __main__ - INFO - Initializing scheduler for non-serverless environment
2025-05-27 15:11:23,188 - __main__ - INFO - Scheduler config: check_interval=30m, max_products=100
2025-05-27 15:11:28,903 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-27 15:11:28,907 - apscheduler.scheduler - INFO - Added job "update_all_prices" to job store "default"
2025-05-27 15:11:28,910 - apscheduler.scheduler - INFO - Scheduler started
2025-05-27 15:11:28,915 - __main__ - INFO - Price update scheduler started with interval: 30 minutes
2025-05-27 15:11:28,986 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.127.187:5000
2025-05-27 15:11:28,986 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-05-27 15:11:29,017 - werkzeug - INFO -  * Restarting with watchdog (windowsapi)
2025-05-27 15:11:32,220 - __main__ - INFO - CORS configured for all origins (development mode)
2025-05-27 15:11:32,252 - models.db - INFO - Database tables created or verified
2025-05-27 15:11:32,257 - __main__ - INFO - Initializing scheduler for non-serverless environment
2025-05-27 15:11:32,257 - __main__ - INFO - Scheduler config: check_interval=30m, max_products=100
2025-05-27 15:11:32,437 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-27 15:11:32,445 - apscheduler.scheduler - INFO - Added job "update_all_prices" to job store "default"
2025-05-27 15:11:32,448 - apscheduler.scheduler - INFO - Scheduler started
2025-05-27 15:11:32,451 - __main__ - INFO - Price update scheduler started with interval: 30 minutes
2025-05-27 15:11:32,472 - werkzeug - WARNING -  * Debugger is active!
2025-05-27 15:11:32,480 - werkzeug - INFO -  * Debugger PIN: 316-319-957
2025-05-27 15:11:54,748 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:11:54] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:11:54,772 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:11:54] "GET /api/products HTTP/1.1" 200 -
2025-05-27 15:11:55,011 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:11:55] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:11:55,059 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:11:55] "GET /api/products HTTP/1.1" 200 -
2025-05-27 15:11:55,092 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:11:55] "GET /api/products HTTP/1.1" 200 -
2025-05-27 15:11:55,372 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:11:55] "GET /api/products HTTP/1.1" 200 -
2025-05-27 15:12:25,054 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:12:25] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:12:49,027 - werkzeug - INFO -  * Detected change in 'C:\\Users\\sriva\\AppData\\Roaming\\Python\\Python312\\site-packages\\flask\\wrappers.py', reloading
2025-05-27 15:12:49,068 - werkzeug - INFO -  * Detected change in 'C:\\Users\\sriva\\AppData\\Roaming\\Python\\Python312\\site-packages\\werkzeug\\wrappers\\__init__.py', reloading
2025-05-27 15:12:49,082 - werkzeug - INFO -  * Detected change in 'C:\\Users\\sriva\\AppData\\Roaming\\Python\\Python312\\site-packages\\werkzeug\\wrappers\\request.py', reloading
2025-05-27 15:12:49,194 - werkzeug - INFO -  * Detected change in 'C:\\Users\\sriva\\AppData\\Roaming\\Python\\Python312\\site-packages\\werkzeug\\sansio\\request.py', reloading
2025-05-27 15:12:49,213 - werkzeug - INFO -  * Detected change in 'C:\\Users\\sriva\\AppData\\Roaming\\Python\\Python312\\site-packages\\flask\\json\\__init__.py', reloading
2025-05-27 15:12:49,231 - werkzeug - INFO -  * Detected change in 'C:\\Users\\sriva\\AppData\\Roaming\\Python\\Python312\\site-packages\\werkzeug\\wrappers\\response.py', reloading
2025-05-27 15:12:49,256 - werkzeug - INFO -  * Detected change in 'C:\\Users\\sriva\\AppData\\Roaming\\Python\\Python312\\site-packages\\werkzeug\\sansio\\response.py', reloading
2025-05-27 15:12:49,502 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-05-27 15:12:49,749 - werkzeug - INFO -  * Restarting with watchdog (windowsapi)
2025-05-27 15:12:52,195 - __main__ - INFO - CORS configured for all origins (development mode)
2025-05-27 15:12:52,215 - models.db - INFO - Database tables created or verified
2025-05-27 15:12:52,219 - __main__ - INFO - Initializing scheduler for non-serverless environment
2025-05-27 15:12:52,220 - __main__ - INFO - Scheduler config: check_interval=30m, max_products=100
2025-05-27 15:12:52,269 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-27 15:12:52,271 - apscheduler.scheduler - INFO - Added job "update_all_prices" to job store "default"
2025-05-27 15:12:52,271 - apscheduler.scheduler - INFO - Scheduler started
2025-05-27 15:12:52,271 - __main__ - INFO - Price update scheduler started with interval: 30 minutes
2025-05-27 15:12:52,285 - werkzeug - WARNING -  * Debugger is active!
2025-05-27 15:12:52,289 - werkzeug - INFO -  * Debugger PIN: 316-319-957
2025-05-27 15:12:55,361 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:12:55] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:13:25,046 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:13:25] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:13:55,360 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:13:55] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:14:25,048 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:14:25] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:14:55,351 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:14:55] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:15:24,447 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:15:24] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:15:55,379 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:15:55] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:16:25,044 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:16:25] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:16:54,759 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:16:54] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:17:24,456 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:17:24] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:17:54,762 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:17:54] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:18:24,446 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:18:24] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:18:54,762 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:18:54] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:19:24,444 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:19:24] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:19:54,755 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:19:54] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:20:24,454 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:20:24] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:20:54,770 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:20:54] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:21:25,049 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:21:25] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:21:55,360 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:21:55] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:23:15,350 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:23:15] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:24:15,046 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:24:15] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:25:15,362 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:25:15] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:26:15,052 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:26:15] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:27:05,065 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:27:05] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:27:15,996 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:27:15] "GET /api/products HTTP/1.1" 200 -
2025-05-27 15:27:16,308 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:27:16] "GET /api/products HTTP/1.1" 200 -
2025-05-27 15:27:24,756 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:27:24] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:27:54,455 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:27:54] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:28:18,451 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:28:18] "GET /api/products HTTP/1.1" 200 -
2025-05-27 15:28:18,714 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:28:18] "GET /api/products HTTP/1.1" 200 -
2025-05-27 15:28:24,450 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:28:24] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:28:54,765 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:28:54] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:29:25,045 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:29:25] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:29:55,363 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:29:55] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:30:25,055 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:30:25] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:30:55,354 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:30:55] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:31:30,242 - werkzeug - INFO -  * Detected change in 'C:\\Users\\sriva\\AppData\\Roaming\\Python\\Python312\\site-packages\\_pytest\\cacheprovider.py', reloading
2025-05-27 15:31:30,296 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-05-27 15:31:30,457 - werkzeug - INFO -  * Restarting with watchdog (windowsapi)
2025-05-27 15:31:32,164 - __main__ - INFO - CORS configured for all origins (development mode)
2025-05-27 15:31:32,184 - models.db - INFO - Database tables created or verified
2025-05-27 15:31:32,187 - __main__ - INFO - Initializing scheduler for non-serverless environment
2025-05-27 15:31:32,188 - __main__ - INFO - Scheduler config: check_interval=30m, max_products=100
2025-05-27 15:31:32,238 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-27 15:31:32,239 - apscheduler.scheduler - INFO - Added job "update_all_prices" to job store "default"
2025-05-27 15:31:32,239 - apscheduler.scheduler - INFO - Scheduler started
2025-05-27 15:31:32,240 - __main__ - INFO - Price update scheduler started with interval: 30 minutes
2025-05-27 15:31:32,257 - werkzeug - WARNING -  * Debugger is active!
2025-05-27 15:31:32,263 - werkzeug - INFO -  * Debugger PIN: 316-319-957
2025-05-27 15:32:15,375 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:32:15] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:33:15,047 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:33:15] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:34:15,346 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:34:15] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:34:50,148 - werkzeug - INFO -  * Detected change in 'C:\\Users\\sriva\\AppData\\Roaming\\Python\\Python312\\site-packages\\dotenv\\__init__.py', reloading
2025-05-27 15:34:50,162 - werkzeug - INFO -  * Detected change in 'C:\\Users\\sriva\\AppData\\Roaming\\Python\\Python312\\site-packages\\dotenv\\main.py', reloading
2025-05-27 15:34:50,195 - werkzeug - INFO -  * Detected change in 'C:\\Users\\sriva\\AppData\\Roaming\\Python\\Python312\\site-packages\\apscheduler\\schedulers\\background.py', reloading
2025-05-27 15:34:50,208 - werkzeug - INFO -  * Detected change in 'C:\\Users\\sriva\\AppData\\Roaming\\Python\\Python312\\site-packages\\apscheduler\\schedulers\\blocking.py', reloading
2025-05-27 15:34:50,227 - werkzeug - INFO -  * Detected change in 'C:\\Users\\sriva\\AppData\\Roaming\\Python\\Python312\\site-packages\\apscheduler\\schedulers\\base.py', reloading
2025-05-27 15:34:50,269 - werkzeug - INFO -  * Detected change in 'C:\\Users\\sriva\\AppData\\Roaming\\Python\\Python312\\site-packages\\six.py', reloading
2025-05-27 15:34:50,291 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-05-27 15:34:50,474 - werkzeug - INFO -  * Restarting with watchdog (windowsapi)
2025-05-27 15:34:52,534 - __main__ - INFO - CORS configured for all origins (development mode)
2025-05-27 15:34:52,558 - models.db - INFO - Database tables created or verified
2025-05-27 15:34:52,561 - __main__ - INFO - Initializing scheduler for non-serverless environment
2025-05-27 15:34:52,562 - __main__ - INFO - Scheduler config: check_interval=30m, max_products=100
2025-05-27 15:34:52,622 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-27 15:34:52,624 - apscheduler.scheduler - INFO - Added job "update_all_prices" to job store "default"
2025-05-27 15:34:52,624 - apscheduler.scheduler - INFO - Scheduler started
2025-05-27 15:34:52,625 - __main__ - INFO - Price update scheduler started with interval: 30 minutes
2025-05-27 15:34:52,637 - werkzeug - WARNING -  * Debugger is active!
2025-05-27 15:34:52,642 - werkzeug - INFO -  * Debugger PIN: 316-319-957
2025-05-27 15:35:00,267 - werkzeug - INFO -  * Detected change in 'C:\\Users\\sriva\\AppData\\Roaming\\Python\\Python312\\site-packages\\sqlalchemy\\exc.py', reloading
2025-05-27 15:35:00,297 - werkzeug - INFO -  * Detected change in 'C:\\Users\\sriva\\AppData\\Roaming\\Python\\Python312\\site-packages\\sqlalchemy\\sql\\expression.py', reloading
2025-05-27 15:35:00,327 - werkzeug - INFO -  * Detected change in 'C:\\Users\\sriva\\AppData\\Roaming\\Python\\Python312\\site-packages\\sqlalchemy\\sql\\functions.py', reloading
2025-05-27 15:35:00,381 - werkzeug - INFO -  * Detected change in 'C:\\Users\\sriva\\AppData\\Roaming\\Python\\Python312\\site-packages\\sqlalchemy\\sql\\_elements_constructors.py', reloading
2025-05-27 15:35:00,418 - werkzeug - INFO -  * Detected change in 'C:\\Users\\sriva\\AppData\\Roaming\\Python\\Python312\\site-packages\\sqlalchemy\\sql\\_typing.py', reloading
2025-05-27 15:35:00,476 - werkzeug - INFO -  * Detected change in 'C:\\Users\\sriva\\AppData\\Roaming\\Python\\Python312\\site-packages\\sqlalchemy\\sql\\elements.py', reloading
2025-05-27 15:35:00,541 - werkzeug - INFO -  * Detected change in 'C:\\Users\\sriva\\AppData\\Roaming\\Python\\Python312\\site-packages\\sqlalchemy\\sql\\operators.py', reloading
2025-05-27 15:35:00,581 - werkzeug - INFO -  * Detected change in 'C:\\Users\\sriva\\AppData\\Roaming\\Python\\Python312\\site-packages\\sqlalchemy\\sql\\traversals.py', reloading
2025-05-27 15:35:00,613 - werkzeug - INFO -  * Detected change in 'C:\\Users\\sriva\\AppData\\Roaming\\Python\\Python312\\site-packages\\sqlalchemy\\sql\\lambdas.py', reloading
2025-05-27 15:35:00,670 - werkzeug - INFO -  * Detected change in 'C:\\Users\\sriva\\AppData\\Roaming\\Python\\Python312\\site-packages\\sqlalchemy\\orm\\scoping.py', reloading
2025-05-27 15:35:00,697 - werkzeug - INFO -  * Detected change in 'C:\\Users\\sriva\\AppData\\Roaming\\Python\\Python312\\site-packages\\sqlalchemy\\orm\\session.py', reloading
2025-05-27 15:35:00,736 - werkzeug - INFO -  * Detected change in 'C:\\Users\\sriva\\AppData\\Roaming\\Python\\Python312\\site-packages\\flask_sqlalchemy\\session.py', reloading
2025-05-27 15:35:00,748 - werkzeug - INFO -  * Detected change in 'C:\\Users\\sriva\\AppData\\Roaming\\Python\\Python312\\site-packages\\flask_sqlalchemy\\table.py', reloading
2025-05-27 15:35:00,755 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-05-27 15:35:00,931 - werkzeug - INFO -  * Restarting with watchdog (windowsapi)
2025-05-27 15:35:02,512 - __main__ - INFO - CORS configured for all origins (development mode)
2025-05-27 15:35:02,531 - models.db - INFO - Database tables created or verified
2025-05-27 15:35:02,534 - __main__ - INFO - Initializing scheduler for non-serverless environment
2025-05-27 15:35:02,534 - __main__ - INFO - Scheduler config: check_interval=30m, max_products=100
2025-05-27 15:35:02,579 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-27 15:35:02,581 - apscheduler.scheduler - INFO - Added job "update_all_prices" to job store "default"
2025-05-27 15:35:02,581 - apscheduler.scheduler - INFO - Scheduler started
2025-05-27 15:35:02,582 - __main__ - INFO - Price update scheduler started with interval: 30 minutes
2025-05-27 15:35:02,594 - werkzeug - WARNING -  * Debugger is active!
2025-05-27 15:35:02,598 - werkzeug - INFO -  * Debugger PIN: 316-319-957
2025-05-27 15:35:15,355 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:35:15] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:35:20,089 - werkzeug - INFO -  * Detected change in 'C:\\Users\\sriva\\AppData\\Roaming\\Python\\Python312\\site-packages\\sqlalchemy\\util\\deprecations.py', reloading
2025-05-27 15:35:20,813 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-05-27 15:35:20,950 - werkzeug - INFO -  * Restarting with watchdog (windowsapi)
2025-05-27 15:35:22,541 - __main__ - INFO - CORS configured for all origins (development mode)
2025-05-27 15:35:22,559 - models.db - INFO - Database tables created or verified
2025-05-27 15:35:22,563 - __main__ - INFO - Initializing scheduler for non-serverless environment
2025-05-27 15:35:22,563 - __main__ - INFO - Scheduler config: check_interval=30m, max_products=100
2025-05-27 15:35:22,610 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-27 15:35:22,611 - apscheduler.scheduler - INFO - Added job "update_all_prices" to job store "default"
2025-05-27 15:35:22,612 - apscheduler.scheduler - INFO - Scheduler started
2025-05-27 15:35:22,612 - __main__ - INFO - Price update scheduler started with interval: 30 minutes
2025-05-27 15:35:22,625 - werkzeug - WARNING -  * Debugger is active!
2025-05-27 15:35:22,629 - werkzeug - INFO -  * Debugger PIN: 316-319-957
2025-05-27 15:36:15,346 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:36:15] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:36:33,086 - werkzeug - INFO -  * Detected change in 'C:\\Users\\sriva\\OneDrive\\Desktop\\alfaleus-internship\\backend\\services\\scraper.py', reloading
2025-05-27 15:36:33,098 - werkzeug - INFO -  * Detected change in 'C:\\Users\\sriva\\OneDrive\\Desktop\\alfaleus-internship\\backend\\services\\scraper.py', reloading
2025-05-27 15:36:33,626 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-05-27 15:36:33,816 - werkzeug - INFO -  * Restarting with watchdog (windowsapi)
2025-05-27 15:36:35,435 - __main__ - INFO - CORS configured for all origins (development mode)
2025-05-27 15:36:35,453 - models.db - INFO - Database tables created or verified
2025-05-27 15:36:35,456 - __main__ - INFO - Initializing scheduler for non-serverless environment
2025-05-27 15:36:35,456 - __main__ - INFO - Scheduler config: check_interval=30m, max_products=100
2025-05-27 15:36:35,510 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-27 15:36:35,511 - apscheduler.scheduler - INFO - Added job "update_all_prices" to job store "default"
2025-05-27 15:36:35,513 - apscheduler.scheduler - INFO - Scheduler started
2025-05-27 15:36:35,513 - __main__ - INFO - Price update scheduler started with interval: 30 minutes
2025-05-27 15:36:35,526 - werkzeug - WARNING -  * Debugger is active!
2025-05-27 15:36:35,529 - werkzeug - INFO -  * Debugger PIN: 316-319-957
2025-05-27 15:36:48,615 - werkzeug - INFO -  * Detected change in 'C:\\Users\\sriva\\OneDrive\\Desktop\\alfaleus-internship\\backend\\services\\scraper.py', reloading
2025-05-27 15:36:48,618 - werkzeug - INFO -  * Detected change in 'C:\\Users\\sriva\\OneDrive\\Desktop\\alfaleus-internship\\backend\\services\\scraper.py', reloading
2025-05-27 15:36:48,628 - werkzeug - INFO -  * Detected change in 'C:\\Users\\sriva\\OneDrive\\Desktop\\alfaleus-internship\\backend\\services\\scraper.py', reloading
2025-05-27 15:36:48,691 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-05-27 15:36:48,870 - werkzeug - INFO -  * Restarting with watchdog (windowsapi)
2025-05-27 15:36:50,507 - __main__ - INFO - CORS configured for all origins (development mode)
2025-05-27 15:36:50,526 - models.db - INFO - Database tables created or verified
2025-05-27 15:36:50,529 - __main__ - INFO - Initializing scheduler for non-serverless environment
2025-05-27 15:36:50,530 - __main__ - INFO - Scheduler config: check_interval=30m, max_products=100
2025-05-27 15:36:50,578 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-27 15:36:50,580 - apscheduler.scheduler - INFO - Added job "update_all_prices" to job store "default"
2025-05-27 15:36:50,580 - apscheduler.scheduler - INFO - Scheduler started
2025-05-27 15:36:50,581 - __main__ - INFO - Price update scheduler started with interval: 30 minutes
2025-05-27 15:36:50,593 - werkzeug - WARNING -  * Debugger is active!
2025-05-27 15:36:50,596 - werkzeug - INFO -  * Debugger PIN: 316-319-957
2025-05-27 15:37:15,356 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:37:15] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:38:15,046 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:38:15] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:39:15,353 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:39:15] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:40:15,052 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:40:15] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:40:31,408 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:40:31] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:40:31,421 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:40:31] "GET /api/products HTTP/1.1" 200 -
2025-05-27 15:41:02,125 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:41:02] "GET /api/products HTTP/1.1" 200 -
2025-05-27 15:41:02,429 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:41:02] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:41:02,433 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:41:02] "GET /api/products HTTP/1.1" 200 -
2025-05-27 15:41:02,746 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:41:02] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:41:02,748 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:41:02] "GET /api/products HTTP/1.1" 200 -
2025-05-27 15:41:03,061 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:41:03] "GET /api/products HTTP/1.1" 200 -
2025-05-27 15:41:13,372 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:41:13] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:41:13,379 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:41:13] "GET /api/products HTTP/1.1" 200 -
2025-05-27 15:41:13,638 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:41:13] "GET /api/products HTTP/1.1" 200 -
2025-05-27 15:41:28,927 - apscheduler.executors.default - INFO - Running job "update_all_prices (trigger: interval[0:30:00], next run at: 2025-05-27 15:41:28 IST)" (scheduled at 2025-05-27 15:41:28.902946+05:30)
2025-05-27 15:41:28,938 - services.scheduler - INFO - Starting scheduled price update with smart prioritization
2025-05-27 15:41:29,060 - services.scheduler - INFO - Found 6 products to evaluate for updates
2025-05-27 15:41:29,070 - services.scheduler - WARNING - Error calculating volatility for product 1: (sqlite3.OperationalError) no such column: price_records.platform
[SQL: SELECT price_records.price AS price_records_price 
FROM price_records 
WHERE price_records.product_id = ? AND price_records.platform = ? AND price_records.timestamp >= ?]
[parameters: (1, 'Amazon', '2025-05-20 10:11:28.937314')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-05-27 15:41:29,091 - services.scheduler - ERROR - Error calculating priority for product 1: (sqlite3.OperationalError) no such column: price_records.platform
[SQL: SELECT price_records.id AS price_records_id, price_records.product_id AS price_records_product_id, price_records.price AS price_records_price, price_records.platform AS price_records_platform, price_records.timestamp AS price_records_timestamp 
FROM price_records 
WHERE price_records.product_id = ? AND price_records.timestamp >= ? ORDER BY price_records.timestamp DESC
 LIMIT ? OFFSET ?]
[parameters: (1, '2025-05-25 10:11:28.937314', 5, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-05-27 15:41:29,165 - werkzeug - INFO -  * Detected change in 'C:\\Users\\sriva\\AppData\\Roaming\\Python\\Python312\\site-packages\\sqlalchemy\\orm\\context.py', reloading
2025-05-27 15:41:29,219 - werkzeug - INFO -  * Detected change in 'C:\\Users\\sriva\\AppData\\Roaming\\Python\\Python312\\site-packages\\sqlalchemy\\engine\\base.py', reloading
2025-05-27 15:41:29,274 - werkzeug - INFO -  * Detected change in 'C:\\Users\\sriva\\AppData\\Roaming\\Python\\Python312\\site-packages\\sqlalchemy\\engine\\default.py', reloading
2025-05-27 15:41:29,279 - services.scheduler - WARNING - Error calculating volatility for product 2: (sqlite3.OperationalError) no such column: price_records.platform
[SQL: SELECT price_records.price AS price_records_price 
FROM price_records 
WHERE price_records.product_id = ? AND price_records.platform = ? AND price_records.timestamp >= ?]
[parameters: (2, 'Amazon', '2025-05-20 10:11:28.937314')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-05-27 15:41:29,285 - services.scheduler - ERROR - Error calculating priority for product 2: (sqlite3.OperationalError) no such column: price_records.platform
[SQL: SELECT price_records.id AS price_records_id, price_records.product_id AS price_records_product_id, price_records.price AS price_records_price, price_records.platform AS price_records_platform, price_records.timestamp AS price_records_timestamp 
FROM price_records 
WHERE price_records.product_id = ? AND price_records.timestamp >= ? ORDER BY price_records.timestamp DESC
 LIMIT ? OFFSET ?]
[parameters: (2, '2025-05-25 10:11:28.937314', 5, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-05-27 15:41:29,292 - services.scheduler - WARNING - Error calculating volatility for product 3: (sqlite3.OperationalError) no such column: price_records.platform
[SQL: SELECT price_records.price AS price_records_price 
FROM price_records 
WHERE price_records.product_id = ? AND price_records.platform = ? AND price_records.timestamp >= ?]
[parameters: (3, 'Amazon', '2025-05-20 10:11:28.937314')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-05-27 15:41:29,298 - services.scheduler - ERROR - Error calculating priority for product 3: (sqlite3.OperationalError) no such column: price_records.platform
[SQL: SELECT price_records.id AS price_records_id, price_records.product_id AS price_records_product_id, price_records.price AS price_records_price, price_records.platform AS price_records_platform, price_records.timestamp AS price_records_timestamp 
FROM price_records 
WHERE price_records.product_id = ? AND price_records.timestamp >= ? ORDER BY price_records.timestamp DESC
 LIMIT ? OFFSET ?]
[parameters: (3, '2025-05-25 10:11:28.937314', 5, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-05-27 15:41:29,306 - services.scheduler - WARNING - Error calculating volatility for product 4: (sqlite3.OperationalError) no such column: price_records.platform
[SQL: SELECT price_records.price AS price_records_price 
FROM price_records 
WHERE price_records.product_id = ? AND price_records.platform = ? AND price_records.timestamp >= ?]
[parameters: (4, 'Amazon', '2025-05-20 10:11:28.937314')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-05-27 15:41:29,311 - services.scheduler - ERROR - Error calculating priority for product 4: (sqlite3.OperationalError) no such column: price_records.platform
[SQL: SELECT price_records.id AS price_records_id, price_records.product_id AS price_records_product_id, price_records.price AS price_records_price, price_records.platform AS price_records_platform, price_records.timestamp AS price_records_timestamp 
FROM price_records 
WHERE price_records.product_id = ? AND price_records.timestamp >= ? ORDER BY price_records.timestamp DESC
 LIMIT ? OFFSET ?]
[parameters: (4, '2025-05-25 10:11:28.937314', 5, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-05-27 15:41:29,317 - services.scheduler - WARNING - Error calculating volatility for product 5: (sqlite3.OperationalError) no such column: price_records.platform
[SQL: SELECT price_records.price AS price_records_price 
FROM price_records 
WHERE price_records.product_id = ? AND price_records.platform = ? AND price_records.timestamp >= ?]
[parameters: (5, 'Amazon', '2025-05-20 10:11:28.937314')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-05-27 15:41:29,323 - services.scheduler - ERROR - Error calculating priority for product 5: (sqlite3.OperationalError) no such column: price_records.platform
[SQL: SELECT price_records.id AS price_records_id, price_records.product_id AS price_records_product_id, price_records.price AS price_records_price, price_records.platform AS price_records_platform, price_records.timestamp AS price_records_timestamp 
FROM price_records 
WHERE price_records.product_id = ? AND price_records.timestamp >= ? ORDER BY price_records.timestamp DESC
 LIMIT ? OFFSET ?]
[parameters: (5, '2025-05-25 10:11:28.937314', 5, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-05-27 15:41:29,330 - services.scheduler - WARNING - Error calculating volatility for product 6: (sqlite3.OperationalError) no such column: price_records.platform
[SQL: SELECT price_records.price AS price_records_price 
FROM price_records 
WHERE price_records.product_id = ? AND price_records.platform = ? AND price_records.timestamp >= ?]
[parameters: (6, 'Amazon', '2025-05-20 10:11:28.937314')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-05-27 15:41:29,334 - services.scheduler - ERROR - Error calculating priority for product 6: (sqlite3.OperationalError) no such column: price_records.platform
[SQL: SELECT price_records.id AS price_records_id, price_records.product_id AS price_records_product_id, price_records.price AS price_records_price, price_records.platform AS price_records_platform, price_records.timestamp AS price_records_timestamp 
FROM price_records 
WHERE price_records.product_id = ? AND price_records.timestamp >= ? ORDER BY price_records.timestamp DESC
 LIMIT ? OFFSET ?]
[parameters: (6, '2025-05-25 10:11:28.937314', 5, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-05-27 15:41:29,338 - services.scheduler - INFO - Priority order for this update run:
2025-05-27 15:41:29,339 - services.scheduler - INFO -   1. Product 1: MSI PRO MP225 21.5 Inch Full HD Office Monitor - 1920 x 1080 IPS Panel, 100 Hz, Eye-Friendly Screen, Tilt-Adjustable - HDMI, D-Sub (VGA) - Score: 1.81 (Time: 1.81, Volatility: 0.50, Alerts: 1.00, Recent changes: 0.00)
2025-05-27 15:41:29,340 - services.scheduler - INFO -   2. Product 2: Nutrabay Gold Vital Whey Protein Powder - 1kg, Gourmet Vanilla | 20g Protein for Beginners | Added Vitamins & Minerals | Muscle Growth & Faster Recovery | Gym Supplement for Men & Women - Score: 1.72 (Time: 1.72, Volatility: 0.50, Alerts: 0.00, Recent changes: 0.00)
2025-05-27 15:41:29,341 - services.scheduler - INFO -   3. Product 3: Panasonic 1.5 Ton 3 Star Premium Wi-Fi Inverter Smart Split AC (Matter Enabled, Higher Airflow, Copper Condenser, 7in1 Convertible, True AI, 2-Way, PM 0.1 Filter, CS/CU-SU18AKY3W, White) - Score: 1.72 (Time: 1.72, Volatility: 0.50, Alerts: 0.00, Recent changes: 0.00)
2025-05-27 15:41:29,342 - services.scheduler - INFO -   4. Product 4: HOKIPO Gaming Chair Cover Stretchable Elastic Jacquard Computer Rotating Chair Seat Covers Slipcover(DGRY-NEW2-5008) - Score: 1.14 (Time: 1.14, Volatility: 0.50, Alerts: 0.00, Recent changes: 0.00)
2025-05-27 15:41:29,343 - services.scheduler - INFO -   5. Product 5: Nivia Basic Ankle Support with Adjustable Velcro, Ankle Sleeves, Braces or Wraps, For Support & Stability, Free Size& Black Color, Used for All kind of impact Sports - Score: 0.85 (Time: 0.85, Volatility: 0.50, Alerts: 0.00, Recent changes: 0.00)
2025-05-27 15:41:29,344 - services.scheduler - INFO -   6. Product 6: beAAtho® Verona Mesh High Back Ergonomic Home Office Chair | 3-Years Limited Warranty by beAAtho, Tilting & Height Adjustable Mechanism, Heavy Duty Metal Base | Ideal for Office Work & Study (Grey) - Score: 0.85 (Time: 0.85, Volatility: 0.50, Alerts: 0.00, Recent changes: 0.00)
2025-05-27 15:41:29,345 - services.scheduler - INFO - Processing product 1/6: MSI PRO MP225 21.5 Inch Full HD Office Monitor - 1920 x 1080 IPS Panel, 100 Hz, Eye-Friendly Screen, Tilt-Adjustable - HDMI, D-Sub (VGA) (ID: 1, Priority: 1.81)
2025-05-27 15:41:29,346 - services.scheduler - INFO - Updating prices for product: MSI PRO MP225 21.5 Inch Full HD Office Monitor - 1920 x 1080 IPS Panel, 100 Hz, Eye-Friendly Screen, Tilt-Adjustable - HDMI, D-Sub (VGA) (ID: 1)
2025-05-27 15:41:29,347 - services.scraper - INFO - Starting scrape for URL: https://www.amazon.in/dp/B0D7LKX76Y
2025-05-27 15:41:29,348 - services.scraper - INFO - Detected domain: www.amazon.in
2025-05-27 15:41:29,349 - services.scraper - INFO - Amazon scraping attempt 1/3
2025-05-27 15:41:29,349 - services.scraper - INFO - Starting Amazon scraping for: https://www.amazon.in/dp/B0D7LKX76Y
2025-05-27 15:41:29,350 - services.scraper - INFO - Extracted product ID from URL: B0D7LKX76Y
2025-05-27 15:41:29,351 - services.scraper - INFO - Waiting 1.66 seconds before attempt 1/5
2025-05-27 15:41:29,960 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-05-27 15:41:30,372 - werkzeug - INFO -  * Restarting with watchdog (windowsapi)
2025-05-27 15:41:31,017 - services.scraper - INFO - Sending request to Amazon (attempt 1/5) with timeout of 15 seconds
2025-05-27 15:41:33,617 - __main__ - INFO - CORS configured for all origins (development mode)
2025-05-27 15:41:33,663 - models.db - INFO - Database tables created or verified
2025-05-27 15:41:33,677 - __main__ - INFO - Initializing scheduler for non-serverless environment
2025-05-27 15:41:33,678 - __main__ - INFO - Scheduler config: check_interval=30m, max_products=100
2025-05-27 15:41:33,836 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-27 15:41:33,840 - apscheduler.scheduler - INFO - Added job "update_all_prices" to job store "default"
2025-05-27 15:41:33,840 - apscheduler.scheduler - INFO - Scheduler started
2025-05-27 15:41:33,841 - __main__ - INFO - Price update scheduler started with interval: 30 minutes
2025-05-27 15:41:33,885 - werkzeug - WARNING -  * Debugger is active!
2025-05-27 15:41:33,893 - werkzeug - INFO -  * Debugger PIN: 316-319-957
2025-05-27 15:41:38,705 - services.scraper - WARNING - Detected captcha/bot protection on attempt 1
2025-05-27 15:41:38,706 - services.scraper - INFO - Waiting 1.34 seconds before attempt 2/5
2025-05-27 15:41:40,053 - services.scraper - INFO - Sending request to Amazon (attempt 2/5) with timeout of 20 seconds
2025-05-27 15:41:43,296 - services.scraper - WARNING - Detected captcha/bot protection on attempt 2
2025-05-27 15:41:43,297 - services.scraper - INFO - Waiting 1.91 seconds before attempt 3/5
2025-05-27 15:41:44,366 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:41:44] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:41:45,203 - services.scraper - INFO - Sending request to Amazon (attempt 3/5) with timeout of 25 seconds
2025-05-27 15:41:48,683 - services.scraper - WARNING - Detected captcha/bot protection on attempt 3
2025-05-27 15:41:48,683 - services.scraper - INFO - Waiting 1.92 seconds before attempt 4/5
2025-05-27 15:41:50,600 - services.scraper - INFO - Sending request to Amazon (attempt 4/5) with timeout of 30 seconds
2025-05-27 15:41:54,237 - services.scraper - WARNING - Detected captcha/bot protection on attempt 4
2025-05-27 15:41:54,237 - services.scraper - INFO - Waiting 3.44 seconds before attempt 5/5
2025-05-27 15:41:57,676 - services.scraper - INFO - Sending request to Amazon (attempt 5/5) with timeout of 35 seconds
2025-05-27 15:42:01,211 - services.scraper - WARNING - Detected captcha/bot protection on attempt 5
2025-05-27 15:42:01,211 - services.scraper - WARNING - All standard scraping attempts failed, trying aggressive fallback methods
2025-05-27 15:42:01,212 - services.scraper - INFO - Trying mobile URL: https://www.amazon.in/gp/aw/d/B0D7LKX76Y
2025-05-27 15:42:05,042 - services.scraper - INFO - Successfully extracted product name from mobile site: Consider these available items
2025-05-27 15:42:05,051 - services.scraper - INFO - Successfully scraped Amazon product: Consider these available items
2025-05-27 15:42:05,052 - services.scheduler - ERROR - Error updating main platform price for product 1: 'recorded_at' is an invalid keyword argument for PriceRecord
2025-05-27 15:42:05,111 - services.scraper - INFO - Starting scrape for URL: https://www.amazon.in/dp/B0D7LKX76Y
2025-05-27 15:42:05,112 - services.scraper - INFO - Detected domain: www.amazon.in
2025-05-27 15:42:05,112 - services.scraper - INFO - Amazon scraping attempt 1/3
2025-05-27 15:42:05,113 - services.scraper - INFO - Starting Amazon scraping for: https://www.amazon.in/dp/B0D7LKX76Y
2025-05-27 15:42:05,113 - services.scraper - INFO - Extracted product ID from URL: B0D7LKX76Y
2025-05-27 15:42:05,114 - services.scraper - INFO - Waiting 1.03 seconds before attempt 1/5
2025-05-27 15:42:05,114 - werkzeug - INFO -  * Detected change in 'C:\\Users\\sriva\\AppData\\Roaming\\Python\\Python312\\site-packages\\sqlalchemy\\orm\\decl_base.py', reloading
2025-05-27 15:42:05,597 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-05-27 15:42:05,899 - werkzeug - INFO -  * Restarting with watchdog (windowsapi)
2025-05-27 15:42:06,149 - services.scraper - INFO - Sending request to Amazon (attempt 1/5) with timeout of 15 seconds
2025-05-27 15:42:09,301 - __main__ - INFO - CORS configured for all origins (development mode)
2025-05-27 15:42:09,336 - models.db - INFO - Database tables created or verified
2025-05-27 15:42:09,340 - __main__ - INFO - Initializing scheduler for non-serverless environment
2025-05-27 15:42:09,341 - __main__ - INFO - Scheduler config: check_interval=30m, max_products=100
2025-05-27 15:42:09,417 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-05-27 15:42:09,421 - apscheduler.scheduler - INFO - Added job "update_all_prices" to job store "default"
2025-05-27 15:42:09,422 - apscheduler.scheduler - INFO - Scheduler started
2025-05-27 15:42:09,423 - __main__ - INFO - Price update scheduler started with interval: 30 minutes
2025-05-27 15:42:09,444 - werkzeug - WARNING -  * Debugger is active!
2025-05-27 15:42:09,449 - werkzeug - INFO -  * Debugger PIN: 316-319-957
2025-05-27 15:42:09,835 - services.scraper - WARNING - Detected captcha/bot protection on attempt 1
2025-05-27 15:42:09,835 - services.scraper - INFO - Waiting 1.89 seconds before attempt 2/5
2025-05-27 15:42:11,725 - services.scraper - INFO - Sending request to Amazon (attempt 2/5) with timeout of 20 seconds
2025-05-27 15:42:14,369 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:42:14] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:42:15,050 - services.scraper - WARNING - Detected captcha/bot protection on attempt 2
2025-05-27 15:42:15,050 - services.scraper - INFO - Waiting 2.41 seconds before attempt 3/5
2025-05-27 15:42:17,462 - services.scraper - INFO - Sending request to Amazon (attempt 3/5) with timeout of 25 seconds
2025-05-27 15:42:20,042 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:42:20] "GET /api/products HTTP/1.1" 200 -
2025-05-27 15:42:20,331 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:42:20] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:42:20,368 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:42:20] "GET /api/products HTTP/1.1" 200 -
2025-05-27 15:42:20,648 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:42:20] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:42:20,683 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:42:20] "GET /api/products HTTP/1.1" 200 -
2025-05-27 15:42:20,793 - services.scraper - WARNING - Detected captcha/bot protection on attempt 3
2025-05-27 15:42:20,794 - services.scraper - INFO - Waiting 2.48 seconds before attempt 4/5
2025-05-27 15:42:21,000 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:42:20] "GET /api/products HTTP/1.1" 200 -
2025-05-27 15:42:23,273 - services.scraper - INFO - Sending request to Amazon (attempt 4/5) with timeout of 30 seconds
2025-05-27 15:42:27,550 - services.scraper - WARNING - Detected captcha/bot protection on attempt 4
2025-05-27 15:42:27,551 - services.scraper - INFO - Waiting 3.55 seconds before attempt 5/5
2025-05-27 15:42:31,099 - services.scraper - INFO - Sending request to Amazon (attempt 5/5) with timeout of 35 seconds
2025-05-27 15:42:35,105 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:42:35] "OPTIONS /api/products HTTP/1.1" 200 -
2025-05-27 15:42:35,368 - services.scraper - INFO - Starting scrape for URL: https://www.amazon.in/dp/B06Y1YYB25
2025-05-27 15:42:35,370 - services.scraper - INFO - Detected domain: www.amazon.in
2025-05-27 15:42:35,371 - services.scraper - INFO - Amazon scraping attempt 1/3
2025-05-27 15:42:35,371 - services.scraper - INFO - Starting Amazon scraping for: https://www.amazon.in/dp/B06Y1YYB25
2025-05-27 15:42:35,372 - services.scraper - INFO - Extracted product ID from URL: B06Y1YYB25
2025-05-27 15:42:35,373 - services.scraper - INFO - Waiting 1.34 seconds before attempt 1/5
2025-05-27 15:42:36,276 - services.scraper - WARNING - Detected captcha/bot protection on attempt 5
2025-05-27 15:42:36,277 - services.scraper - WARNING - All standard scraping attempts failed, trying aggressive fallback methods
2025-05-27 15:42:36,278 - services.scraper - INFO - Trying mobile URL: https://www.amazon.in/gp/aw/d/B0D7LKX76Y
2025-05-27 15:42:36,716 - services.scraper - INFO - Sending request to Amazon (attempt 1/5) with timeout of 15 seconds
2025-05-27 15:42:40,990 - services.scraper - INFO - Successfully extracted product name from mobile site: Consider these available items
2025-05-27 15:42:40,998 - services.scraper - INFO - Successfully scraped Amazon product: Consider these available items
2025-05-27 15:42:41,194 - services.scraper - WARNING - Detected captcha/bot protection on attempt 1
2025-05-27 15:42:41,195 - services.scraper - INFO - Waiting 1.48 seconds before attempt 2/5
2025-05-27 15:42:42,676 - services.scraper - INFO - Sending request to Amazon (attempt 2/5) with timeout of 20 seconds
2025-05-27 15:42:43,139 - services.ai_service - ERROR - Error enhancing metadata with Gemini AI: 404 Client Error: Not Found for url: https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=AIzaSyDle9KLhixAi5Q9vkS4p0R8s-jLC75RXEI
2025-05-27 15:42:44,469 - services.ai_service - INFO - Successfully parsed Groq AI response for product: Consider these available items
2025-05-27 15:42:45,422 - services.scheduler - ERROR - Error searching/scraping other platforms for product 1: 'NoneType' object has no attribute 'strip'
2025-05-27 15:42:45,425 - services.scheduler - ERROR - Error updating product 1 (attempt 1/3): 'NoneType' object has no attribute 'strip'
2025-05-27 15:42:45,444 - services.scheduler - INFO - Retry attempt 2 for product 1 after 2.66s delay
2025-05-27 15:42:46,261 - services.scraper - WARNING - Detected captcha/bot protection on attempt 2
2025-05-27 15:42:46,262 - services.scraper - INFO - Waiting 2.59 seconds before attempt 3/5
2025-05-27 15:42:48,109 - services.scheduler - INFO - Updating prices for product: MSI PRO MP225 21.5 Inch Full HD Office Monitor - 1920 x 1080 IPS Panel, 100 Hz, Eye-Friendly Screen, Tilt-Adjustable - HDMI, D-Sub (VGA) (ID: 1)
2025-05-27 15:42:48,110 - services.scraper - INFO - Starting scrape for URL: https://www.amazon.in/dp/B0D7LKX76Y
2025-05-27 15:42:48,111 - services.scraper - INFO - Detected domain: www.amazon.in
2025-05-27 15:42:48,113 - services.scraper - INFO - Amazon scraping attempt 1/3
2025-05-27 15:42:48,113 - services.scraper - INFO - Starting Amazon scraping for: https://www.amazon.in/dp/B0D7LKX76Y
2025-05-27 15:42:48,114 - services.scraper - INFO - Extracted product ID from URL: B0D7LKX76Y
2025-05-27 15:42:48,115 - services.scraper - INFO - Waiting 1.10 seconds before attempt 1/5
2025-05-27 15:42:48,857 - services.scraper - INFO - Sending request to Amazon (attempt 3/5) with timeout of 25 seconds
2025-05-27 15:42:49,216 - services.scraper - INFO - Sending request to Amazon (attempt 1/5) with timeout of 15 seconds
2025-05-27 15:42:50,025 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:42:50] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:42:52,383 - services.scraper - WARNING - Detected captcha/bot protection on attempt 1
2025-05-27 15:42:52,384 - services.scraper - INFO - Waiting 1.93 seconds before attempt 2/5
2025-05-27 15:42:52,437 - services.scraper - WARNING - Detected captcha/bot protection on attempt 3
2025-05-27 15:42:52,437 - services.scraper - INFO - Waiting 1.32 seconds before attempt 4/5
2025-05-27 15:42:53,761 - services.scraper - INFO - Sending request to Amazon (attempt 4/5) with timeout of 30 seconds
2025-05-27 15:42:54,311 - services.scraper - INFO - Sending request to Amazon (attempt 2/5) with timeout of 20 seconds
2025-05-27 15:42:57,180 - services.scraper - WARNING - Detected captcha/bot protection on attempt 4
2025-05-27 15:42:57,181 - services.scraper - INFO - Waiting 2.41 seconds before attempt 5/5
2025-05-27 15:42:57,761 - services.scraper - WARNING - Detected captcha/bot protection on attempt 2
2025-05-27 15:42:57,762 - services.scraper - INFO - Waiting 1.19 seconds before attempt 3/5
2025-05-27 15:42:58,954 - services.scraper - INFO - Sending request to Amazon (attempt 3/5) with timeout of 25 seconds
2025-05-27 15:42:59,594 - services.scraper - INFO - Sending request to Amazon (attempt 5/5) with timeout of 35 seconds
2025-05-27 15:43:02,248 - services.scraper - WARNING - Detected captcha/bot protection on attempt 3
2025-05-27 15:43:02,249 - services.scraper - INFO - Waiting 1.50 seconds before attempt 4/5
2025-05-27 15:43:03,321 - services.scraper - WARNING - Detected captcha/bot protection on attempt 5
2025-05-27 15:43:03,322 - services.scraper - WARNING - All standard scraping attempts failed, trying aggressive fallback methods
2025-05-27 15:43:03,323 - services.scraper - INFO - Trying mobile URL: https://www.amazon.in/gp/aw/d/B06Y1YYB25
2025-05-27 15:43:03,749 - services.scraper - INFO - Sending request to Amazon (attempt 4/5) with timeout of 30 seconds
2025-05-27 15:43:07,293 - services.scraper - WARNING - Detected captcha/bot protection on attempt 4
2025-05-27 15:43:07,294 - services.scraper - INFO - Waiting 1.51 seconds before attempt 5/5
2025-05-27 15:43:08,256 - services.scraper - INFO - Successfully extracted product name from mobile site: Casio FX-CG50 Scientific Graphic Calculator (Black)
2025-05-27 15:43:08,357 - services.scraper - INFO - Successfully scraped Amazon product: Casio FX-CG50 Scientific Graphic Calculator (Black)
2025-05-27 15:43:08,404 - services.database - ERROR - Error inserting price record: (sqlite3.OperationalError) table price_records has no column named platform
[SQL: INSERT INTO price_records (product_id, price, platform, timestamp) VALUES (?, ?, ?, ?)]
[parameters: (7, 13994.0, 'Amazon', '2025-05-27 10:13:08.403043')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-05-27 15:43:08,405 - routes.products - ERROR - Error adding product: (sqlite3.OperationalError) table price_records has no column named platform
[SQL: INSERT INTO price_records (product_id, price, platform, timestamp) VALUES (?, ?, ?, ?)]
[parameters: (7, 13994.0, 'Amazon', '2025-05-27 10:13:08.403043')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-05-27 15:43:08,407 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:43:08] "[35m[1mPOST /api/products HTTP/1.1[0m" 500 -
2025-05-27 15:43:08,806 - services.scraper - INFO - Sending request to Amazon (attempt 5/5) with timeout of 35 seconds
2025-05-27 15:43:12,496 - services.scraper - WARNING - Detected captcha/bot protection on attempt 5
2025-05-27 15:43:12,497 - services.scraper - WARNING - All standard scraping attempts failed, trying aggressive fallback methods
2025-05-27 15:43:12,498 - services.scraper - INFO - Trying mobile URL: https://www.amazon.in/gp/aw/d/B0D7LKX76Y
2025-05-27 15:43:16,067 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:43:16] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:43:16,079 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:43:16] "GET /api/products HTTP/1.1" 200 -
2025-05-27 15:43:16,294 - services.scraper - INFO - Successfully extracted product name from mobile site: Consider these available items
2025-05-27 15:43:16,304 - services.scraper - INFO - Successfully scraped Amazon product: Consider these available items
2025-05-27 15:43:16,305 - services.scheduler - ERROR - Error updating main platform price for product 1: 'recorded_at' is an invalid keyword argument for PriceRecord
2025-05-27 15:43:16,307 - services.scraper - INFO - Starting scrape for URL: https://www.amazon.in/dp/B0D7LKX76Y
2025-05-27 15:43:16,307 - services.scraper - INFO - Detected domain: www.amazon.in
2025-05-27 15:43:16,307 - services.scraper - INFO - Amazon scraping attempt 1/3
2025-05-27 15:43:16,308 - services.scraper - INFO - Starting Amazon scraping for: https://www.amazon.in/dp/B0D7LKX76Y
2025-05-27 15:43:16,308 - services.scraper - INFO - Extracted product ID from URL: B0D7LKX76Y
2025-05-27 15:43:16,308 - services.scraper - INFO - Waiting 1.68 seconds before attempt 1/5
2025-05-27 15:43:16,324 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:43:16] "GET /api/health HTTP/1.1" 200 -
2025-05-27 15:43:16,394 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:43:16] "GET /api/products HTTP/1.1" 200 -
2025-05-27 15:43:16,410 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:43:16] "GET /api/products HTTP/1.1" 200 -
2025-05-27 15:43:16,734 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:43:16] "GET /api/products HTTP/1.1" 200 -
2025-05-27 15:43:17,990 - services.scraper - INFO - Sending request to Amazon (attempt 1/5) with timeout of 15 seconds
2025-05-27 15:43:21,336 - services.scraper - WARNING - Detected captcha/bot protection on attempt 1
2025-05-27 15:43:21,336 - services.scraper - INFO - Waiting 1.99 seconds before attempt 2/5
2025-05-27 15:43:23,325 - services.scraper - INFO - Sending request to Amazon (attempt 2/5) with timeout of 20 seconds
2025-05-27 15:43:25,827 - services.database - ERROR - Error getting price history for product 7: (sqlite3.OperationalError) no such column: price_records.platform
[SQL: SELECT price_records.id AS price_records_id, price_records.product_id AS price_records_product_id, price_records.price AS price_records_price, price_records.platform AS price_records_platform, price_records.timestamp AS price_records_timestamp 
FROM price_records 
WHERE price_records.product_id = ? ORDER BY price_records.timestamp ASC]
[parameters: (7,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-05-27 15:43:25,828 - routes.products - ERROR - Error fetching product 7 with grouped history: (sqlite3.OperationalError) no such column: price_records.platform
[SQL: SELECT price_records.id AS price_records_id, price_records.product_id AS price_records_product_id, price_records.price AS price_records_price, price_records.platform AS price_records_platform, price_records.timestamp AS price_records_timestamp 
FROM price_records 
WHERE price_records.product_id = ? ORDER BY price_records.timestamp ASC]
[parameters: (7,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-05-27 15:43:25,830 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:43:25] "[35m[1mGET /api/products/7 HTTP/1.1[0m" 500 -
2025-05-27 15:43:26,094 - services.database - ERROR - Error getting price history for product 7: (sqlite3.OperationalError) no such column: price_records.platform
[SQL: SELECT price_records.id AS price_records_id, price_records.product_id AS price_records_product_id, price_records.price AS price_records_price, price_records.platform AS price_records_platform, price_records.timestamp AS price_records_timestamp 
FROM price_records 
WHERE price_records.product_id = ? ORDER BY price_records.timestamp ASC]
[parameters: (7,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-05-27 15:43:26,097 - routes.products - ERROR - Error fetching product 7 with grouped history: (sqlite3.OperationalError) no such column: price_records.platform
[SQL: SELECT price_records.id AS price_records_id, price_records.product_id AS price_records_product_id, price_records.price AS price_records_price, price_records.platform AS price_records_platform, price_records.timestamp AS price_records_timestamp 
FROM price_records 
WHERE price_records.product_id = ? ORDER BY price_records.timestamp ASC]
[parameters: (7,)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-05-27 15:43:26,100 - werkzeug - INFO - 127.0.0.1 - - [27/May/2025 15:43:26] "[35m[1mGET /api/products/7 HTTP/1.1[0m" 500 -
2025-05-27 15:43:26,647 - services.scraper - WARNING - Detected captcha/bot protection on attempt 2
2025-05-27 15:43:26,648 - services.scraper - INFO - Waiting 1.34 seconds before attempt 3/5
2025-05-27 15:43:27,992 - services.scraper - INFO - Sending request to Amazon (attempt 3/5) with timeout of 25 seconds
2025-05-27 15:43:31,599 - services.scraper - WARNING - Detected captcha/bot protection on attempt 3
2025-05-27 15:43:31,601 - services.scraper - INFO - Waiting 3.50 seconds before attempt 4/5
2025-05-27 15:43:35,102 - services.scraper - INFO - Sending request to Amazon (attempt 4/5) with timeout of 30 seconds
2025-05-27 15:43:38,537 - services.scraper - WARNING - Detected captcha/bot protection on attempt 4
2025-05-27 15:43:38,537 - services.scraper - INFO - Waiting 3.40 seconds before attempt 5/5
